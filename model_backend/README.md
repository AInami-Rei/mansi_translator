# Переводчик

Этот проект представляет собой сервис перевода, который использует фреймворк Ray+FastAPI и библиотеку трансформеров Hugging Face для обеспечения возможности перевода между языками манси и русским.

## Особенности

- Перевод между мансийским и русским языками
- Веб-сервис на основе FastAPI для легкой интеграции и развертывания
- Использование предобученных моделей перевода из библиотеки трансформеров Hugging Face
- Настраиваемые параметры для выбора модели и использования устройств

## Конфигурация

Настройте необходимые переменные окружения в файлах .env и rayconfig.yaml.

Также проект использует библиотеку pydantic-settings для управления конфигурацией. Настройки конфигурации определены в файле settings.py.

- ```default_device```: Устройство по умолчанию для использования моделями перевода (например, "cuda:0" для GPU, "cpu" для CPU).
- ```ms_ru_model_maxlen```: Максимальная длина для модели перевода с манси на русский.
- ```ms_ru_model_name```: Название предобученной модели перевода с манси на русский из библиотеки Hugging Face.
- ```ru_ms_model_maxlen```: Максимальная длина для модели перевода с русского на манси.
- ```ru_ms_model_name```: Название предобученной модели перевода с русского на манси из библиотеки Hugging Face.

## Запуск
Модели, которые используются в нашем сервисе: [ru-mans](https://drive.google.com/drive/u/1/folders/1Z6GSOoXYsVDLkElACreA8lXgFiOj181U) и [mans-ru](https://drive.google.com/drive/u/1/folders/1cltjultwVLIcvBXVw-ZT55uzKk6N7Lto)

Их необходимо скачать в папку /models и в конфигурации указать соответствующие имена.

Далее запустить с помощью docker-compose:
```
docker-compose up -d
```

## Использование
1. Доступ к документации API по адресу http://127.0.0.1:8000/docs для изучения доступных конечных точек и их использования.

2. Сделать POST-запрос к конечной точке /translate/{направление} с использованием следующих параметров:
   - направление: Направление перевода, либо "ms-ru" (с манси на русский), либо "ru-ms" (с русского на манси).
   - текст: Текст для перевода.

   Пример запроса на curl:

```
   curl -X 'POST' \
   'http://127.0.0.1:8000/translate/ru-ms?text=Привет' \
   -H 'accept: application/json' \
   -d ''
```
или с помощью Python:
```
import requests

url = 'http://127.0.0.1:8000/translate/en-ru'
params = {
    'text': 'Привет!'
}
headers = {
    'accept': 'application/json'
}

response = requests.post(url, params=params, headers=headers)
print(response.json())
```

   Пример ответа:
```
   {
      "original_text": "Привет, как дела?",
      "translation": "мēн паща ла̄тыӈ?"
   }
```
